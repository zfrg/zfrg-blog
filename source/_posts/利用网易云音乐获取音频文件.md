---
title: 利用网易云音乐获取音频文件
tags:
  - 网易云音乐
categories:
  - 开发
excerpt: >-
  <p>当你想离线听音乐，或者拷贝到MP3设备，你就需要寻找网站下载音频文件。你可能会用网易云音乐客户端下载音乐，但是很遗憾，文件格式并不是MP3、WAV之类的格式，绝大多数播放器无法识别。其实借助网易云官方的api也可以简单地获取到大多数音频播放器可读取的音频文件。</p>
date: 2023-08-05 16:07:03
---
<!-- toc -->

## Api方案

### 音乐ID

**注：由于官方限制游客浏览，未登录状态下官网访问有限制，无法搜索音乐。不想用网易云账号的请移步下文“资源嗅探”的“方法2：第三方”一节。**

电脑进入[网页版网易云音乐](https://music.163.com/)，随便进一首歌，就会发现地址栏出现类似如下链接：

[https://music.163.com/#/song?id=1950897620](https://music.163.com/#/song?id=1950897620)

链接中`?id=`后面的数字是不固定的，这首歌是`1950897620`，每首歌都是不一样的，这串数字就是这首歌的音乐ID。

### 直链

在搜索引擎搜一下就可以找到直链格式。
链接格式如下：

`https://music.163.com/song/media/outer/url?id={ID}.mp3`

以上面的那首歌为例，它的音乐ID是`1950897620`，则它的直链就是[https://music.163.com/song/media/outer/url?id=1950897620.mp3](https://music.163.com/song/media/outer/url?id=1950897620.mp3)

可惜，这个方法仅限于能直接听不用网易云音乐会员的音乐，否则会404。

## 资源嗅探

### 原理（非必读，后面讲方法）

了解了上文的api后，你可能会疑惑：

> 啊博主博主，难道我每次都必须手动按上面的步骤操作嘛？

现在，让我们重新打开网易云音乐网页版。按 <kbd>F12</kbd> 打开“开发者工具”并选择“网络/Network”一栏，再按 <kbd>Ctrl</kbd>+<kbd>R</kbd> 刷新，在页面选一首歌听，选择“媒体/Media”。

这时你就能在资源列表找到一个链接特别长的音频文件地址，长得和Api直链重定向后的地址特别像。事实是，这段地址背后就是生成的音频文件，格式也不仅限于 MP3 。

现在，你已经学会了手动获取网页端请求的资源，这就是资源嗅探的原理。接下来让我们学习如何利用插件自动完成资源的获取。

### 方法1：插件

这个方法还是基于官方的网页版网易云音乐，但是需要借助非官方的插件来完成。这里我拿“AIX 智能下载器(图片/视频/音乐/文档)”举例。

![AIX智能下载器](https://img.alicdn.com/imgextra/i3/769376516/O1CN01TA3ESH1y0NisqNYIc_!!769376516.png)

1. 如果你使用的是 Microsoft Edge 浏览器，你可以直接点击这个链接[AIX 智能下载器(图片/视频/音乐/文档) - Microsoft Edge Addons](https://microsoftedge.microsoft.com/addons/detail/aix%E6%99%BA%E8%83%BD%E4%B8%8B%E8%BD%BD%E5%99%A8%E5%9B%BE%E7%89%87%E8%A7%86%E9%A2%91%E9%9F%B3%E4%B9%90%E6%96%87%E6%A1%A3/pljfekbkmmbkdfhddpebdlmfngigcohc)来安装这个插件。如果你使用谷歌浏览器或其他基于 Chromium 的浏览器，你可以前往[插件官网](https://aixdownloader.com/)下载适用于你的浏览器的插件。
2. 重新进入网易云音乐官网，打开扩展界面你就能更快捷地获取到音乐直链，它能帮助你获取到所有你能在网站上听到的。

至此，你又学会了使用资源嗅探插件完成音频获取。

> 关于资源嗅探插件的题外话：
>
> 其实我本人更习惯用 IDM 的插件，能直接转到多线程下载器下载文件。同样的还有 FDM、NDM 之类的下载器，但资源嗅探方面肯定还是不如前文讲的那个插件强。

### 方法2：第三方

有些第三方网易云音乐播放器（客户端、网页端）支持直接下载音乐，比如开源的“洛雪音乐”（很遗憾这个播放器基本上很难使用了），桌面端的 Alger Music Player 也是能下载的。

![](https://www.appmiu.com/wp-content/uploads/2024/12/image-7.webp)

我在用的是[网页版的 Alger Music Player](https://music.alger.fun/)，这是一个开源的基于网易云音乐的播放器，搭配资源嗅探插件也能完成下载。
